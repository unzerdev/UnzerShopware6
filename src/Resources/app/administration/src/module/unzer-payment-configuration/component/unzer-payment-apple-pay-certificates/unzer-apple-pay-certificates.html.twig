{% block unzer_payment_apple_pay_certificates %}
    <sw-container :title="$tc(`unzer-payment-settings.apple-pay.certificates.title`)"
                  class="unzer-payment-settings--apple-pay-certificates">
        <template v-show="!isLoading">
            {% block unzer_payment_apple_pay_certificates_form %}
                <div v-if="parentConfigData['UnzerPayment6.settings.applePayPaymentProcessingCertificateId']">
                    <sw-alert
                            variant="info"
                            appearance="default"
                            :showIcon="true"
                            :closable="false">
                        <div v-html="$tc('unzer-payment-settings.apple-pay.certificates.textExisting')"></div>
                    </sw-alert>
                </div>
                <div>
                    <sw-alert
                            variant="info"
                            appearance="default"
                            :showIcon="true"
                            :closable="false">
                        <div v-html="$tc('unzer-payment-settings.apple-pay.certificates.textAll')"></div>
                    </sw-alert>
                </div>
                <sw-inherit-wrapper
                    ref="inheritWrapperPaymentProcessingCertificate"
                    :label="$tc('unzer-payment-settings.apple-pay.paymentProcessingCertificate.label')"
                    v-model="parentConfigData['UnzerPayment6.settings.applePayPaymentProcessingCertificateId']"
                    :inheritedValue="getInheritedValue('applePayPaymentProcessingCertificateId')"
                    :hasParent="isNotDefaultSalesChannel"
                    >
                    <template #content="props">
                        <sw-label
                            v-if="!isDataLoading"
                            :variant="paymentProcessingValid ? 'success' : 'danger'"
                            appearance="pill"
                            v-tooltip="$tc('unzer-payment-settings.apple-pay.certificates.check.paymentProcessingValid.' + paymentProcessingValid.toString())">
                            <sw-icon :name="paymentProcessingValid ? 'default-basic-checkmark-circle' : 'default-badge-alert'" :small="true"></sw-icon>
                            <span v-html="$tc('unzer-payment-settings.apple-pay.certificates.check.paymentProcessingValid.' + paymentProcessingValid.toString())"></span>
                        </sw-label><br>
                        <sw-label
                                v-if="!isDataLoading"
                                :variant="paymentProcessingActive ? 'success' : 'danger'"
                                appearance="pill"
                                v-tooltip="$tc('unzer-payment-settings.apple-pay.certificates.check.paymentProcessingActive.' + paymentProcessingActive.toString())">
                            <sw-icon :name="paymentProcessingActive ? 'default-basic-checkmark-circle' : 'default-badge-alert'" :small="true"></sw-icon>
                            <span v-html="$tc('unzer-payment-settings.apple-pay.certificates.check.paymentProcessingActive.' + paymentProcessingActive.toString())"></span>
                        </sw-label>
                        <sw-loader size="10px" v-else></sw-loader>
                        <br>
                        <small v-html="$tc('unzer-payment-settings.apple-pay.paymentProcessingCertificate.helpText')"></small>

                        <sw-file-input
                            ref="paymentProcessingCertificateInput"
                            class="sw-field sw-block-field"
                            v-model="paymentProcessingCertificate"
                            @change="onInputChangePaymentProcessing"
                        >
                        </sw-file-input>
                    </template>
                </sw-inherit-wrapper>

                <sw-inherit-wrapper
                    ref="inheritWrapperPaymentProcessingKey"
                    :label="$tc('unzer-payment-settings.apple-pay.paymentProcessingKey.label')"
                    v-model="parentConfigData['UnzerPayment6.settings.applePayPaymentProcessingCertificateId']"
                    :inheritedValue="getInheritedValue('applePayPaymentProcessingCertificateId')"
                    :hasParent="isNotDefaultSalesChannel"
                >
                    <template #content="props">
                        <sw-file-input
                            ref="paymentProcessingKeyInput"
                            class="sw-field sw-block-field"
                            v-model="paymentProcessingKey"
                            @change="onInputChangePaymentProcessing"
                        >
                        </sw-file-input>
                    </template>
                </sw-inherit-wrapper>

                <sw-inherit-wrapper
                    ref="inheritWrapperMerchantIdentificationCertificate"
                    :label="$tc('unzer-payment-settings.apple-pay.merchantIdentificationCertificate.label')"
                    v-model="parentConfigData['UnzerPayment6.settings.applePayMerchantIdentificationCertificateId']"
                    :inheritedValue="getInheritedValue('applePayMerchantIdentificationCertificateId')"
                    :hasParent="isNotDefaultSalesChannel"
                >
                    <template #content="props">
                        <sw-label
                            v-if="!isDataLoading"
                            :variant="merchantIdentificationValid ? 'success' : 'danger'"
                            appearance="pill"
                            v-tooltip="$tc('unzer-payment-settings.apple-pay.certificates.check.merchantIdentificationValid.' + merchantIdentificationValid.toString())">
                            <sw-icon :name="merchantIdentificationValid ? 'default-basic-checkmark-circle' : 'default-badge-alert'" :small="true"></sw-icon>
                            <span v-html="$tc('unzer-payment-settings.apple-pay.certificates.check.merchantIdentificationValid.' + merchantIdentificationValid.toString())"></span>
                        </sw-label>
                        <sw-loader size="10px" v-else></sw-loader>
                        <br>
                        <sw-label
                            v-if="!isDataLoading && merchantIdentificationValidUntil !== null"
                            :variant="(merchantIdentificationValidUntil > now) ? 'success' : 'warning'"
                            appearance="pill"
                            v-tooltip="$tc('unzer-payment-settings.apple-pay.certificates.check.merchantIdentificationValidUntil.' + (merchantIdentificationValidUntil > now).toString())">
                            <sw-icon name="default-time-clock" :small="true"></sw-icon>
                            <span v-html="$tc('unzer-payment-settings.apple-pay.certificates.check.merchantIdentificationValidUntil.' + (merchantIdentificationValidUntil > now).toString())"></span>
                        </sw-label>
                        <br>
                        <small v-html="$tc('unzer-payment-settings.apple-pay.merchantIdentificationCertificate.helpText')"></small>

                        <sw-file-input
                            ref="merchantIdentificationCertificateInput"
                            class="sw-field sw-block-field"
                            v-model="merchantIdentificationCertificate"
                            @change="onInputChangeMerchantIdentification"
                        >
                        </sw-file-input>
                    </template>
                </sw-inherit-wrapper>

                <sw-inherit-wrapper
                    ref="inheritWrapperMerchantIdentificationKey"
                    :label="$tc('unzer-payment-settings.apple-pay.merchantIdentificationKey.label')"
                    v-model="parentConfigData['UnzerPayment6.settings.applePayMerchantIdentificationCertificateId']"
                    :inheritedValue="getInheritedValue('applePayMerchantIdentificationCertificateId')"
                    :hasParent="isNotDefaultSalesChannel"
                >
                    <template #content="props">
                        <sw-file-input
                            ref="merchantIdentificationKeyInput"
                            class="sw-field sw-block-field"
                            v-model="merchantIdentificationKey"
                            @change="onInputChangeMerchantIdentification"
                        >
                        </sw-file-input>
                    </template>
                </sw-inherit-wrapper>
            {% endblock %}
        </template>
    </sw-container>
{% endblock %}
